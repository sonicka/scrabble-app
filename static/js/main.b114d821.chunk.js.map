{"version":3,"sources":["constants.js","reducers/wonGameReducer.js","store.js","reducers/usersByScoreReducer.js","reducers/usersByWinsReducer.js","reducers/userReducer.js","reducers/activeTabReducer.js","reducers/shouldLoadUsersReducer.js","components/UserStats.jsx","leaderboard/components/UserItem.jsx","leaderboard/components/Tab.jsx","api/fetch.js","actions.js","leaderboard/LeaderBoard.jsx","user-popup/components/TextField.jsx","user-popup/components/Button.jsx","user-popup/components/UserDetailsSection.jsx","user-popup/components/HighestScoreSection.jsx","user-popup/components/WonGamesSection.jsx","user-popup/UserPopup.jsx","App.js","index.js"],"names":["BASE_URL","LEADER_BOARD_URL","USERS_URL","GAMES_URL","SAVE_USERS_BY_WINS","SAVE_USERS_BY_SCORE","SAVE_USER","CLEAR_USER","SET_ACTIVE_TAB","SET_SHOULD_LOAD_USERS","SET_GAME","RESET_WON_GAME","SET_GAME_INDEX","SET_LAST_INDEX","MOST_WINS_TAB","AVG_SCORE_TAB","PREV","initialState","game","gameIndex","lastIndex","rootReducer","combineReducers","usersByScore","state","action","type","payload","users","usersByWins","user","activeTab","shouldLoadUsers","wonGame","store","createStore","composeWithDevTools","applyMiddleware","thunk","UserStats","wins","averageScore","losses","customClass","className","UserItem","name","onClick","role","Tab","isActive","text","getLeaderBoardByWins","a","fetch","response","ok","json","responseJson","console","error","getLeaderBoardByAvgScore","getUserById","userId","updateUser","username","email","method","headers","body","JSON","stringify","Error","getGameWithHighestScore","playerId","opponentId","score","length","find","scores","findIndex","sc","memberId","getGamesWonByUser","get","setShouldLoadUsers","isUpdated","dispatch","mapDispatchToProps","setActiveTab","saveUser","connect","saveUserWithGameDetails","highestScore","against","bestGameResponse","opponent","bestGame","opponentName","id","won","winnerId","date","createdAt","map","TextField","isEditing","originalValue","handleChange","useState","value","setValue","isValid","setIsValid","useEffect","onChange","event","target","Button","disabled","nameFromState","userNameFromState","emailFromState","checkFormValidity","setIsEditing","setName","setUsername","setEmail","isFormValid","setIsFormValid","editForm","saveForm","resetFields","cancelEditing","HighestScoreSection","WonGamesSection","fetchGameWonByUser","playerScore","opponentScore","Date","toLocaleString","setGame","setGameIndex","setLastIndex","hideUserDetail","fetchWonGame","direction","nextIndex","newGame","saveUsersByWins","saveUsersByScore","clearUser","resetWonGame","detailShown","loadUsersByWins","loadUsersByScore","fetchLeaderBoard","updatedUsers","getUserDetails","updatedUser","push","userDetails","userWithDetails","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+ZAAaA,EAAW,wBACXC,EAAgB,UAAMD,EAAN,gBAChBE,EAAS,UAAMF,EAAN,UACTG,EAAS,UAAMH,EAAN,UAETI,EAAqB,qBACrBC,EAAsB,sBACtBC,EAAY,YACZC,EAAa,aACbC,EAAiB,iBACjBC,EAAwB,wBACxBC,EAAW,WACXC,EAAiB,iBACjBC,EAAiB,iBACjBC,EAAiB,iBAEjBC,EAAgB,gBAChBC,EAAgB,gBAEhBC,EAAO,O,OCZdC,EAAe,CACnBC,KAAM,KACNC,UAAW,EACXC,UAAW,GCAAC,EAAcC,0BAAgB,CACzCC,aCTiC,WAAyB,IAAxBC,EAAuB,uDAAf,GAAIC,EAAW,uCACzD,OAAQA,EAAOC,MACb,KAAKrB,EACH,OAAOoB,EAAOE,QAAQC,MACxB,QACE,OAAOJ,IDKXK,YEVgC,WAAyB,IAAxBL,EAAuB,uDAAf,GAAIC,EAAW,uCACxD,OAAQA,EAAOC,MACb,KAAKtB,EACH,OAAOqB,EAAOE,QAAQC,MACxB,QACE,OAAOJ,IFMXM,KGXyB,WAA2B,IAA1BN,EAAyB,uDAAjB,KAAMC,EAAW,uCACnD,OAAQA,EAAOC,MACb,KAAKpB,EACH,OAAO,2BACFkB,GACAC,EAAOE,QAAQG,MAEtB,KAAKvB,EACH,OAAO,KACT,QACE,OAAOiB,IHEXO,UIZ8B,WAAoC,IAAnCP,EAAkC,uDAA1BV,EAAeW,EAAW,uCACjE,OAAQA,EAAOC,MACb,KAAKlB,EACH,OAAOiB,EAAOE,QAAQI,UACxB,QACE,OAAOP,IJQXQ,gBKboC,WAA2B,IAA1BR,IAAyB,yDAAXC,EAAW,uCAC9D,OAAQA,EAAOC,MACb,KAAKjB,EACH,OAAOgB,EAAOE,QAChB,QACE,OAAOH,ILSXS,QDH4B,WAAmC,IAAlCT,EAAiC,uDAAzBP,EAAcQ,EAAW,uCAC9D,OAAQA,EAAOC,MACb,KAAKhB,EACH,OAAO,2BAAKc,GAAZ,IAAmBN,KAAMO,EAAOE,QAAQT,OAC1C,KAAKN,EACH,OAAO,2BAAKY,GAAZ,IAAmBL,UAAWM,EAAOE,QAAQR,YAC/C,KAAKN,EACH,OAAO,2BAAKW,GAAZ,IAAmBJ,UAAWK,EAAOE,QAAQP,YAC/C,KAAKT,EACH,OAAOM,EACT,QACE,OAAOO,MCLAU,EAAQC,sBACnBd,EACAe,8BAAoBC,0BAAgBC,O,+BMPvBC,EAZG,SAAC,GAAiD,IAA/CC,EAA8C,EAA9CA,KAAMC,EAAwC,EAAxCA,aAAcC,EAA0B,EAA1BA,OAAQC,EAAkB,EAAlBA,YAC/C,OACE,sBAAKC,UAAWD,EAAhB,UACE,gCAAMH,EAAN,WACA,oCACA,gCAAMC,EAAN,gBACA,oCACA,gCAAMC,EAAN,iBCWSG,G,MAdE,SAAC,GAAmD,IAAjDC,EAAgD,EAAhDA,KAAMN,EAA0C,EAA1CA,KAAMC,EAAoC,EAApCA,aAAcC,EAAsB,EAAtBA,OAAQK,EAAc,EAAdA,QACpD,OACE,sBAAKH,UAAU,iBAAiBG,QAASA,EAASC,KAAK,SAAvD,UACI,qBAAKJ,UAAU,iBAAf,SAAiCE,IACjC,cAAC,EAAD,CACEN,KAAMA,EACNC,aAAcA,EACdC,OAAQA,EACRC,YAAY,yBCEPM,G,MAXH,SAAC,GAAiC,IAA/BC,EAA8B,EAA9BA,SAAUH,EAAoB,EAApBA,QAASI,EAAW,EAAXA,KAChC,OACE,qBACEP,UAAS,2BAAsBM,EAAW,SAAW,IACrDH,QAASA,EACTC,KAAK,SAHP,SAIKG,MCTIC,EAAoB,uCAAG,8BAAAC,EAAA,+EAETC,MAAM,GAAD,OACvBrD,EADuB,sCAFI,YAE1BsD,EAF0B,QAKnBC,GALmB,gCAMHD,EAASE,OANN,cAMxBC,EANwB,yBAOvBA,GAPuB,gEAUhCC,QAAQC,MAAM,wCAAd,MAVgC,kBAWzB,MAXyB,0DAAH,qDAepBC,EAAwB,uCAAG,8BAAAR,EAAA,+EAEbC,MAAM,GAAD,OACvBrD,EADuB,8CAFQ,YAE9BsD,EAF8B,QAKvBC,GALuB,gCAMPD,EAASE,OANF,cAM5BC,EAN4B,yBAO3BA,GAP2B,gEAUpCC,QAAQC,MAAM,iDAAd,MAVoC,kBAW7B,MAX6B,0DAAH,qDAexBE,EAAW,uCAAG,WAAOC,GAAP,iBAAAV,EAAA,+EAEAC,MAAM,GAAD,OAAIpD,EAAJ,YAAiB6D,IAFtB,YAEjBR,EAFiB,QAGVC,GAHU,gCAIMD,EAASE,OAJf,cAIfC,EAJe,yBAKdA,GALc,gEAQvBC,QAAQC,MAAM,wBAAd,MARuB,kBAShB,MATgB,0DAAH,sDAaXI,EAAU,uCAAG,WAAOD,EAAQjB,EAAMmB,EAAUC,GAA/B,SAAAb,EAAA,+EAECC,MAAM,GAAD,OAAIpD,EAAJ,YAAiB6D,GAAU,CACrDI,OAAQ,MACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEzB,OAAMmB,WAAUC,YALnB,kBAOTV,GAPS,0CAOE,GAPF,aAQX,IAAIgB,MAAM,yBARC,gEAUtBb,QAAQC,MAAR,MAVsB,mBAWf,GAXe,0DAAH,4DAeVa,EAAuB,uCAAG,WAAOC,EAAUC,EAAYC,GAA7B,iBAAAvB,EAAA,+EAIlBC,MAAM,GAAD,OACjBnD,EADiB,8BACcuE,EADd,2BACyCE,IAL5B,YAInCrB,EAJmC,QAOtBC,GAPsB,gCAOGD,EAASE,OAPZ,OAOlBC,EAPkB,iBAQ9BA,EAAamB,OARiB,kCAShBvB,MAAM,GAAD,OACjBnD,EADiB,8BACcuE,EADd,2BACyCE,IAV9B,aASjCrB,EATiC,QAYpBC,GAZoB,kCAYKD,EAASE,OAZd,QAYhBC,EAZgB,kBAc9BA,EAAamB,OAdiB,uBAcH,IAAIL,MAAM,mBAdP,WAeP,IAAxBd,EAAamB,OAfkB,0CAeGnB,EAAa,IAfhB,iCAgB5BA,EAAaoB,MAClB,SAAC5D,GAAD,OACEA,EAAK6D,OAAOC,WACV,SAACC,GAAD,OAAQA,EAAGC,WAAaR,GAAYO,EAAGL,QAAUA,MAC9C,MApB0B,yCAuBnCjB,QAAQC,MAAM,2CAAd,MAvBmC,kBAwB5B,MAxB4B,0DAAH,0DA4BvBuB,EAAiB,uCAAG,WAAOT,EAAUvD,GAAjB,iBAAAkC,EAAA,+EAENC,MAAM,GAAD,OACvBnD,EADuB,qBACDuE,EADC,kBACiBvD,EADjB,cAFC,YAEvBoC,EAFuB,QAKhBC,GALgB,gCAMAD,EAASE,OANT,cAMrBC,EANqB,yBAOpB,CACLxC,KAAMwC,EAAa,GACnBtC,UAAWmC,EAASa,QAAQgB,IAAI,mBATP,gEAa7BzB,QAAQC,MAAM,qCAAd,MAb6B,kBActB,MAdsB,0DAAH,wDCxCvB,SAASyB,EAAmBC,GACjC,OAAO,SAACC,GACNA,EAAS,CACP7D,KAAMjB,EACNkB,QAAS2D,K,UCQTE,EAAqB,CACzBC,aDJK,SAAsB1D,GAC3B,OAAO,SAACwD,GACNA,EAAS,CACP7D,KAAMlB,EACNmB,QAAS,CAAEI,iBCCf2D,SD/BK,SAAkB5D,GACvB,OAAO,SAACyD,GACNA,EAAS,CACP7D,KAAMpB,EACNqB,QAAS,CAAEG,aC8BF6D,eAdS,SAACnE,GAGvB,MAAO,CACLO,UAHgBP,EAAMO,UAItBH,MAHYJ,EAAMO,YAAcjB,EAAgBU,EAAMK,YAAcL,EAAMD,gBAYtCiE,EAAzBG,EAvDK,SAAC,GAAkD,IAAhD/D,EAA+C,EAA/CA,MAAOG,EAAwC,EAAxCA,UAAW0D,EAA6B,EAA7BA,aAAcC,EAAe,EAAfA,SAC/CE,EAAuB,uCAAI,WAAO9D,GAAP,2BAAAuB,EAAA,6DACvBU,EAA6CjC,EAA7CiC,OADuB,EACsBjC,EAArC+D,aAAgBC,EADD,EACCA,QAASlB,EADV,EACUA,MADV,SAECH,EAAwBV,EAAQ+B,EAASlB,GAF1C,UAEzBmB,EAFyB,gDAGDjE,GAHC,uBAIRgC,EAAYgC,GAJJ,OAIzBE,EAJyB,OAKzBC,EAAW,CACfC,aAAcF,EAASlD,KACvB6B,WAAYqB,EAASG,GACrBC,IAAKL,EAAiBM,WAAatC,EACnCa,QACA0B,KAAMP,EAAiBQ,WAEzBb,EAAS,2BAAK5D,GAAN,IAAYmE,cAZW,4CAAJ,sDA2B7B,OACE,sBAAKrD,UAAU,oBAAf,UACI,sBAAKA,UAAU,oBAAf,UACE,cAAC,EAAD,CAAKM,SAAUnB,IAAcjB,EAAeiC,QAAS,kBAAM0C,EAAa3E,IAAgBqC,KAAK,cAC7F,cAAC,EAAD,CAAKD,SAAUnB,IAAchB,EAAegC,QAAS,kBAAM0C,EAAa1E,IAAgBoC,KAAK,qBAE/F,qBAAKP,UAAU,0BAAf,SACGhB,EAnBuBA,EAAM4E,KAAI,SAAA1E,GAAI,OAC5C,cAAC,EAAD,CAEEgB,KAAMhB,EAAKgB,KACXN,KAAMV,EAAKU,KACXC,aAAcX,EAAKW,aACnBC,OAAQZ,EAAKY,OACbK,QAAS,kBAAM6C,EAAwB9D,KALlCA,EAAKiC,WAQmB,qBAAKnB,UAAU,qBAAf,0E,OCDpB6D,G,MA9BG,SAAC,GAAiE,IAA/DN,EAA8D,EAA9DA,GAAIO,EAA0D,EAA1DA,UAAWC,EAA+C,EAA/CA,cAAeC,EAAgC,EAAhCA,aAAcjE,EAAkB,EAAlBA,YAAkB,EACrDkE,mBAASF,GAD4C,mBACzEG,EADyE,KAClEC,EADkE,OAEjDF,oBAAS,GAFwC,mBAEzEG,EAFyE,KAEhEC,EAFgE,KAIjFC,qBAAU,WACHR,IACHK,EAASJ,GACTM,GAAW,MAEZ,CAACP,EAAWC,IAQf,OACED,EACE,uBACEhF,KAAK,OACLoB,KAAMqD,EACNW,MAAOA,EACPK,SAZoB,SAACC,GACzBL,EAASK,EAAMC,OAAOP,OACtBF,EAAaQ,EAAMC,OAAOP,MAAOE,GACjCC,IAAaG,EAAMC,OAAOP,QAUtBlE,UAAS,qBAAiBoE,EAA4B,GAAlB,mBAEpC,qBAAKpE,UAAWD,EAAhB,SAA8BmE,MCnBvBQ,EAVA,SAAC,GAAD,IAAGnE,EAAH,EAAGA,KAAMJ,EAAT,EAASA,QAASJ,EAAlB,EAAkBA,YAAa4E,EAA/B,EAA+BA,SAA/B,OACb,wBACE3E,UAAWD,GAAe,GAC1BI,QAASA,EACTwE,SAAUA,EAHZ,SAKGpE,KC4ECqC,G,MAAqB,CACzBH,uBAGaM,eATS,SAACnE,GAAW,IAAD,EACSA,EAAMM,KAChD,MAAO,CAAEiC,OAFwB,EACzBA,OACSyD,cAFgB,EACjB1E,KACsB2E,kBAFL,EACXxD,SAC6CyD,eAFlC,EACDxD,SAQMsB,EAAzBG,EA9EY,SAAC,GAAsF,IAM5GgC,EANwB5D,EAAmF,EAAnFA,OAAQyD,EAA2E,EAA3EA,cAAeC,EAA4D,EAA5DA,kBAAmBC,EAAyC,EAAzCA,eAAgBrC,EAAyB,EAAzBA,mBAAyB,EAC3EwB,mBAAS,MADkE,mBACvGH,EADuG,KAC5FkB,EAD4F,OAErFf,mBAASW,GAF4E,mBAEvG1E,EAFuG,KAEjG+E,EAFiG,OAG7EhB,mBAASY,GAHoE,mBAGvGxD,EAHuG,KAG7F6D,EAH6F,OAInFjB,mBAASa,GAJ0E,mBAIvGxD,EAJuG,KAIhG6D,EAJgG,OAKvElB,oBAAS,GAL8D,mBAKvGmB,EALuG,KAK1FC,EAL0F,KAQ/Gf,qBAAU,WACRe,EAAeN,OACd,CAAC7E,EAAMmB,EAAUC,EAAOyD,IAE3B,IAAMO,EAAW,kBAAMN,GAAa,IACpCD,EAAoB,kBAAM7E,GAAQmB,GAAYC,GAE9C,IAAMiE,EAAQ,uCAAG,sBAAA9E,EAAA,yDACXmE,IAAkB1E,GAAQ2E,IAAsBxD,GAAYyD,IAAmBxD,EADpE,gCAESF,EAAWD,EAAQjB,EAAMmB,EAAUC,GAF5C,cAIXmB,GAAmB,GAEnB+C,IANW,OASfR,GAAa,GATE,2CAAH,qDAYRS,EAAgB,WACpBD,IACAR,GAAa,IAGTQ,EAAc,WAClBP,EAAQL,GACRM,EAAYL,GACZM,EAASL,IAyBX,OACE,sBAAK9E,UAAU,4BAAf,UArBE,sBAAKA,UAAU,kBAAf,UACE,cAAC,EAAD,CAAWD,YAAY,cAAcwD,GAAG,OAAOQ,cAAe7D,EAAM4D,UAAWA,EAAWE,aAAciB,IACxG,cAAC,EAAD,CAAWlF,YAAY,iBAAiBwD,GAAG,WAAWQ,cAAe1C,EAAUyC,UAAWA,EAAWE,aAAckB,IACnH,cAAC,EAAD,CAAWnF,YAAY,iBAAiBwD,GAAG,QAAQQ,cAAezC,EAAOwC,UAAWA,EAAWE,aAAcmB,OAM7GrB,EAEA,qCACE,cAAC,EAAD,CAAQvD,KAAK,OAAOJ,QAASoF,EAAUxF,YAAY,iBAAiB4E,UAAWS,IAC/E,cAAC,EAAD,CAAQ7E,KAAK,SAASJ,QAASsF,EAAe1F,YAAY,sBAIzD,cAAC,EAAD,CAAQQ,KAAK,eAAeJ,QAASmF,EAAUvF,YAAY,yBCvDvD2F,I,MATa,SAAC,GAAD,IAAGxF,EAAH,EAAGA,KAAMsD,EAAT,EAASA,IAAKxB,EAAd,EAAcA,MAAOoB,EAArB,EAAqBA,SAAUM,EAA/B,EAA+BA,KAA/B,OAC1B,sBAAK1D,UAAU,qBAAf,UACE,qBAAKA,UAAU,yBAAf,2BACA,gCACE,4BAAIE,IADN,IACiBsD,EAAM,MAAQ,OAD/B,SAC4C,8BAAIxB,EAAJ,aAD5C,YAC0E,4BAAIoB,IAD9E,IAC8FM,GAAI,aAAUA,WCuBjGiC,I,MAzBS,SAAC,GAA8D,IAA5DzF,EAA2D,EAA3DA,KAAM5B,EAAqD,EAArDA,KAAMsH,EAA+C,EAA/CA,mBAAoBrH,EAA2B,EAA3BA,UAAWC,EAAgB,EAAhBA,UAC5D8E,EAAmDhF,EAAnDgF,aAAcuC,EAAqCvH,EAArCuH,YAAaC,EAAwBxH,EAAxBwH,cAAepC,EAASpF,EAAToF,KAQlD,OACE,qCACE,qBAAK1D,UAAU,kBAAf,uBACA,sBAAKA,UAAU,iBAAf,UACE,qBAAKA,UAAWzB,EAAY,EAAI,GAAK,gBAArC,SACE,cAAC,EAAD,CAAQ4B,QAAS,kBAAMyF,EAAmBxH,IAAOmC,KAAK,QAEvDjC,GAZL,sBAAK0B,UAAU,iBAAf,UACGE,EADH,QACcoD,EADd,KAC8BuC,EAD9B,MAC8CC,EAD9C,KAC+DpC,GAAI,aAAU,IAAIqC,KAAKrC,GAAMsC,qBAYxF,qBAAKhG,UAAWzB,EAAYC,EAAY,GAAK,gBAA7C,SACE,cAAC,EAAD,CAAQ2B,QAAS,kBAAMyF,ElBHb,SkBGuCrF,KAAK,gBCgD1DqC,I,MAAqB,CACzBqD,QPYK,SAAiB3H,GACtB,OAAO,SAACqE,GACNA,EAAS,CACP7D,KAAMhB,EACNiB,QAAS,CAAET,YOff4H,aPPK,SAAsB3H,GAC3B,OAAO,SAACoE,GACNA,EAAS,CACP7D,KAAMd,EACNe,QAAS,CAAER,iBOIf4H,aPCK,SAAsB3H,GAC3B,OAAO,SAACmE,GACNA,EAAS,CACP7D,KAAMb,EACNc,QAAS,CAAEP,mBOFFuE,gBAjBS,SAACnE,GACvB,IAAMM,EAAON,EAAMM,KADc,EAEMN,EAAMS,QAC7C,MAAO,CACLH,OACAZ,KAL+B,EAEzBA,KAINC,UAN+B,EAEnBA,UAKZC,UAP+B,EAERA,aAeaoE,GAAzBG,EAjEG,SAAC,GAA+F,IAE5G6C,EAFeQ,EAA4F,EAA5FA,eAAgBlH,EAA4E,EAA5EA,KAAMZ,EAAsE,EAAtEA,KAAMC,EAAgE,EAAhEA,UAAWC,EAAqD,EAArDA,UAAWyH,EAA0C,EAA1CA,QAASC,EAAiC,EAAjCA,aAAcC,EAAmB,EAAnBA,aACpFhF,EAA4GjC,EAA5GiC,OAAQjB,EAAoGhB,EAApGgB,KAAMmB,EAA8FnC,EAA9FmC,SAAUC,EAAoFpC,EAApFoC,MAAOzB,EAA6EX,EAA7EW,aAAcD,EAA+DV,EAA/DU,KAAME,EAAyDZ,EAAzDY,OADoD,EACKZ,EAAjDmE,SAAYC,EADgC,EAChCA,aAAcI,EADkB,EAClBA,KAAM1B,EADY,EACZA,MAAOwB,EADK,EACLA,IAyB1G,OAtBAc,qBAAU,WAEJ1E,GADc,uCAAG,sBAAAa,EAAA,sEAAkBmF,IAAlB,mFAAH,oDACRS,KACT,CAACT,EAAoBhG,IAExBgG,EAAkB,uCAAG,WAAOU,GAAP,iCAAA7F,EAAA,6DACf8F,EAAYhI,EACX+H,GAAWH,EAAavG,EAAO,EAAIA,EAAO,GAC3C0G,GAEFJ,EADAK,EAAYD,IAAclI,EAAOG,EAAY,EAAIA,EAAY,GAJ5C,SAOEgE,EAAkBpB,EAAQoF,GAP5B,cAOf5F,EAPe,OAQboB,EAAapB,EAASrC,KAAK6D,OAAOD,MAAK,SAAAF,GAAK,OAAIA,EAAMM,WAAanB,KAAQmB,SAR9D,SASIpB,EAAYa,GAThB,OASbqB,EATa,OAUbM,EAAO/C,EAASrC,KAAKqF,WAAa,GAClCkC,EAXa,UAWClF,EAASrC,KAAK6D,OAAOD,MAAK,SAAAF,GAAK,OAAIA,EAAMM,WAAanB,YAXvD,aAWC,EAA+Da,MAC7E8D,EAZa,UAYGnF,EAASrC,KAAK6D,OAAOD,MAAK,SAAAF,GAAK,OAAIA,EAAMM,WAAaP,YAZzD,aAYG,EAAmEC,MACnFwE,EAAU,CAAElD,aAAcF,EAASlD,MAAQ,GAAIwD,OAAMmC,cAAaC,iBACxEG,EAAQO,GAdW,4CAAH,sDAkBhB,sBAAKxG,UAAU,kBAAf,UACE,qBAAKA,UAAU,qBAAqBG,QAASiG,EAAgBhG,KAAK,WAC9D,sBAAKJ,UAAU,aAAf,UACA,cAAC,EAAD,CAAoBE,KAAMA,EAAMmB,SAAUA,EAAUC,MAAOA,IAC3D,cAAC,EAAD,CAAW1B,KAAMA,EAAMC,aAAcA,EAAcC,OAAQA,EAAQC,YAAY,eAC/E,cAAC,GAAD,CAAqBG,KAAMA,EAAMsD,IAAKA,EAAKxB,MAAOA,EAAOoB,SAAUE,EAAcI,KAAMA,EAAO,IAAIqC,KAAKrC,GAAMsC,iBAAmB,KAC/H1H,GACC,cAAC,GAAD,CACE6C,OAAQA,EACRjB,KAAMA,EACN5B,KAAMA,EACNsH,mBAAoBA,EACpBrH,UAAWA,EACXC,UAAWA,IAEf,cAAC,EAAD,CAAQ+B,KAAK,SAAIJ,QAASiG,EAAgBrG,YAAY,kCC4C1D6C,I,MAAqB,CACzB6D,gBRtFK,SAAyBzH,GAC9B,OAAO,SAAC2D,GACNA,EAAS,CACP7D,KAAMtB,EACNuB,QAAS,CAAEC,aQmFf0H,iBR9EK,SAA0B1H,GAC/B,OAAO,SAAC2D,GACNA,EAAS,CACP7D,KAAMrB,EACNsB,QAAS,CAAEC,aQ2Ef2H,UR7DK,WACL,OAAO,SAAChE,GACNA,EAAS,CACP7D,KAAMnB,MQ2DViJ,aRTK,WACL,OAAO,SAACjE,GACNA,EAAS,CACP7D,KAAMf,MQOV0E,uBAGaM,gBAjBS,SAACnE,GAGvB,MAAO,CACLiI,cAHoBjI,EAAMM,KAI1BE,gBAHsBR,EAAMQ,mBAeQwD,GAAzBG,EAxFH,SAAC,GAQN,IACD+D,EACAC,EATJN,EAOI,EAPJA,gBACAC,EAMI,EANJA,iBACAC,EAKI,EALJA,UACAC,EAII,EAJJA,aACAnE,EAGI,EAHJA,mBACAoE,EAEI,EAFJA,YACAzH,EACI,EADJA,gBAKAkF,qBAAU,WAMJlF,GALkB,uCAAG,sBAAAqB,EAAA,sEACjBqG,IADiB,uBAEjBC,IAFiB,OAGvBtE,GAAmB,GAHI,2CAAH,oDAMpBuE,KAGD,CAAC5H,EAAiB0H,EAAiBC,EAAkBtE,IAExDqE,EAAe,uCAAG,sCAAArG,EAAA,sEACUD,IADV,UACVvB,EADU,8BAGdwH,EAAgBxH,GAHF,0BAMZgI,EAAe,GANH,cAOChI,GAPD,iEAOPC,EAPO,kBAQYgI,EAAehI,GAR3B,QAQRiI,EARQ,OASdF,EAAaG,KAAKD,GATJ,gJAWhBV,EAAgBQ,GAXA,gEAAH,qDAcfF,EAAgB,uCAAG,sCAAAtG,EAAA,sEACUQ,IADV,UACXtC,EADW,8BAGf+H,EAAiB/H,GAHF,0BAMbsI,EAAe,GANF,cAOAtI,GAPA,iEAORO,EAPQ,kBAQWgI,EAAehI,GAR1B,QAQTiI,EARS,OASfF,EAAaG,KAAKD,GATH,gJAWjBT,EAAiBO,GAXA,gEAAH,qDAchB,IAAMC,EAAc,uCAAG,WAAOhI,GAAP,iBAAAuB,EAAA,sEACKS,EAAYhC,EAAKiC,QADtB,cACfkG,EADe,OAEfC,EAFe,2BAEQpI,GAASmI,GAFjB,kBAGdC,GAHc,2CAAH,sDAWpB,OACE,sBAAKtH,UAAS,cAAS6G,EAAc,YAAc,IAAnD,UACE,cAAC,EAAD,IACCA,GAAe,cAAC,GAAD,CAAWT,eARR,WACrBO,IACAC,a,MCvEJW,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAUnI,MAAOA,EAAjB,SACE,cAAC,GAAD,QAGJoI,SAASC,eAAe,W","file":"static/js/main.b114d821.chunk.js","sourcesContent":["export const BASE_URL = \"http://localhost:3000\";\nexport const LEADER_BOARD_URL = `${BASE_URL}/leaderBoard`;\nexport const USERS_URL = `${BASE_URL}/users`;\nexport const GAMES_URL = `${BASE_URL}/games`;\n\nexport const SAVE_USERS_BY_WINS = \"SAVE_USERS_BY_WINS\";\nexport const SAVE_USERS_BY_SCORE = \"SAVE_USERS_BY_SCORE\";\nexport const SAVE_USER = \"SAVE_USER\";\nexport const CLEAR_USER = \"CLEAR_USER\";\nexport const SET_ACTIVE_TAB = \"SET_ACTIVE_TAB\";\nexport const SET_SHOULD_LOAD_USERS = \"SET_SHOULD_LOAD_USERS\";\nexport const SET_GAME = \"SET_GAME\";\nexport const RESET_WON_GAME = \"RESET_WON_GAME\";\nexport const SET_GAME_INDEX = \"SET_GAME_INDEX\";\nexport const SET_LAST_INDEX = \"SET_LAST_INDEX\";\n\nexport const MOST_WINS_TAB = \"most-wins-tab\";\nexport const AVG_SCORE_TAB = \"avg-score-tab\";\n\nexport const PREV = \"prev\";\nexport const NEXT = \"next\";\n","import {\n  SET_GAME,\n  SET_GAME_INDEX,\n  SET_LAST_INDEX,\n  RESET_WON_GAME,\n} from \"../constants\";\n\nconst initialState = {\n  game: null,\n  gameIndex: 1,\n  lastIndex: 5,\n};\n\nexport const wonGameReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_GAME:\n      return { ...state, game: action.payload.game };\n    case SET_GAME_INDEX:\n      return { ...state, gameIndex: action.payload.gameIndex };\n    case SET_LAST_INDEX:\n      return { ...state, lastIndex: action.payload.lastIndex };\n    case RESET_WON_GAME:\n      return initialState;\n    default:\n      return state;\n  }\n};\n","import { createStore, applyMiddleware, combineReducers } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunk from \"redux-thunk\";\nimport { usersByScoreReducer } from \"./reducers/usersByScoreReducer\";\nimport { usersByWinsReducer } from \"./reducers/usersByWinsReducer\";\nimport { userReducer } from \"./reducers/userReducer\";\nimport { activeTabReducer } from \"./reducers/activeTabReducer\";\nimport { shouldLoadUsersReducer } from \"./reducers/shouldLoadUsersReducer\";\nimport { wonGameReducer } from \"./reducers/wonGameReducer\";\n\nexport const rootReducer = combineReducers({\n  usersByScore: usersByScoreReducer,\n  usersByWins: usersByWinsReducer,\n  user: userReducer,\n  activeTab: activeTabReducer,\n  shouldLoadUsers: shouldLoadUsersReducer,\n  wonGame: wonGameReducer,\n});\n\nexport const store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunk))\n);\n","import { SAVE_USERS_BY_SCORE } from \"../constants\";\n\nexport const usersByScoreReducer = (state = [], action) => {\n  switch (action.type) {\n    case SAVE_USERS_BY_SCORE:\n      return action.payload.users;\n    default:\n      return state;\n  }\n};\n","import { SAVE_USERS_BY_WINS } from \"../constants\";\n\nexport const usersByWinsReducer = (state = [], action) => {\n  switch (action.type) {\n    case SAVE_USERS_BY_WINS:\n      return action.payload.users;\n    default:\n      return state;\n  }\n};\n","import { SAVE_USER, CLEAR_USER } from \"../constants\";\n\nexport const userReducer = (state = null, action) => {\n  switch (action.type) {\n    case SAVE_USER:\n      return {\n        ...state,\n        ...action.payload.user,\n      };\n    case CLEAR_USER:\n      return null;\n    default:\n      return state;\n  }\n};\n","import { SET_ACTIVE_TAB, MOST_WINS_TAB } from \"../constants\";\n\nexport const activeTabReducer = (state = MOST_WINS_TAB, action) => {\n  switch (action.type) {\n    case SET_ACTIVE_TAB:\n      return action.payload.activeTab;\n    default:\n      return state;\n  }\n};\n","import { SET_SHOULD_LOAD_USERS } from \"../constants\";\n\nexport const shouldLoadUsersReducer = (state = true, action) => {\n  switch (action.type) {\n    case SET_SHOULD_LOAD_USERS:\n      return action.payload;\n    default:\n      return state;\n  }\n};\n","import React from 'react';\n\nconst UserStats = ({ wins, averageScore, losses, customClass }) => {\n  return (\n    <div className={customClass}>\n      <div>{wins} wins</div>\n      <div>|</div>\n      <div>{averageScore} avg score</div>\n      <div>|</div>\n      <div>{losses} losses</div>\n    </div>\n  )\n}\n\nexport default UserStats;\n","\n\nimport React from 'react';\nimport UserStats from '../../components/UserStats';\nimport './UserItem.css';\n\nconst UserItem = ({ name, wins, averageScore, losses, onClick }) => {\n  return (\n    <div className='user-item-wrap' onClick={onClick} role='button'>\n        <div className='user-item-name'>{name}</div>\n        <UserStats \n          wins={wins} \n          averageScore={averageScore} \n          losses={losses} \n          customClass='user-item-stats'\n        />\n    </div>\n  )\n}\n\nexport default UserItem;\n","\n\nimport React from 'react';\nimport './Tab.css';\n\nconst Tab = ({ isActive, onClick, text }) => {\n  return (\n    <div \n      className={`leader-board-tab ${isActive ? 'active' : ''}`}\n      onClick={onClick}\n      role='button'>\n        {text}\n    </div>\n  )\n}\n\nexport default Tab;\n","import { LEADER_BOARD_URL, USERS_URL, GAMES_URL } from \"../constants\";\n\nexport const getLeaderBoardByWins = async () => {\n  try {\n    const response = await fetch(\n      `${LEADER_BOARD_URL}?_sort=wins&_limit=10&_order=desc`\n    );\n    if (response.ok) {\n      const responseJson = await response.json();\n      return responseJson;\n    }\n  } catch (error) {\n    console.error(\"Getting leader board by wins failed: \", error);\n    return null;\n  }\n};\n\nexport const getLeaderBoardByAvgScore = async () => {\n  try {\n    const response = await fetch(\n      `${LEADER_BOARD_URL}?_sort=averageScore&_limit=10&_order=desc`\n    );\n    if (response.ok) {\n      const responseJson = await response.json();\n      return responseJson;\n    }\n  } catch (error) {\n    console.error(\"Getting leader board by average score failed: \", error);\n    return null;\n  }\n};\n\nexport const getUserById = async (userId) => {\n  try {\n    const response = await fetch(`${USERS_URL}/${userId}`);\n    if (response.ok) {\n      const responseJson = await response.json();\n      return responseJson;\n    }\n  } catch (error) {\n    console.error(\"Getting user failed: \", error);\n    return null;\n  }\n};\n\nexport const updateUser = async (userId, name, username, email) => {\n  try {\n    const response = await fetch(`${USERS_URL}/${userId}`, {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ name, username, email }),\n    });\n    if (response.ok) return true;\n    else throw new Error(\"Updating user failed.\");\n  } catch (error) {\n    console.error(error);\n    return false;\n  }\n};\n\nexport const getGameWithHighestScore = async (playerId, opponentId, score) => {\n  try {\n    let response;\n    let responseJson;\n    response = await fetch(\n      `${GAMES_URL}?scores.0.memberId=${playerId}&scores.0.score=${score}`\n    );\n    if (response.ok) responseJson = await response.json();\n    if (!responseJson.length) {\n      response = await fetch(\n        `${GAMES_URL}?scores.1.memberId=${playerId}&scores.1.score=${score}`\n      );\n      if (response.ok) responseJson = await response.json();\n    }\n    if (!responseJson.length) throw new Error(\"Game not found.\");\n    if (responseJson.length === 1) return responseJson[0];\n    return responseJson.find(\n      (game) =>\n        game.scores.findIndex(\n          (sc) => sc.memberId === playerId && sc.score === score\n        ) > -1\n    );\n  } catch (error) {\n    console.error(\"Getting game with highest score failed: \", error);\n    return null;\n  }\n};\n\nexport const getGamesWonByUser = async (playerId, gameIndex) => {\n  try {\n    const response = await fetch(\n      `${GAMES_URL}?winnerId=${playerId}&_page=${gameIndex}&_limit=1`\n    );\n    if (response.ok) {\n      const responseJson = await response.json();\n      return {\n        game: responseJson[0],\n        lastIndex: response.headers.get(\"X-Total-Count\"),\n      };\n    }\n  } catch (error) {\n    console.error(\"Getting games won by user failed: \", error);\n    return null;\n  }\n};\n","import {\n  SAVE_USERS_BY_WINS,\n  SAVE_USERS_BY_SCORE,\n  SAVE_USER,\n  CLEAR_USER,\n  SET_SHOULD_LOAD_USERS,\n  SET_ACTIVE_TAB,\n  SET_GAME_INDEX,\n  SET_LAST_INDEX,\n  SET_GAME,\n  RESET_WON_GAME,\n} from \"./constants\";\n\nexport function saveUsersByWins(users) {\n  return (dispatch) => {\n    dispatch({\n      type: SAVE_USERS_BY_WINS,\n      payload: { users },\n    });\n  };\n}\n\nexport function saveUsersByScore(users) {\n  return (dispatch) => {\n    dispatch({\n      type: SAVE_USERS_BY_SCORE,\n      payload: { users },\n    });\n  };\n}\n\nexport function saveUser(user) {\n  return (dispatch) => {\n    dispatch({\n      type: SAVE_USER,\n      payload: { user },\n    });\n  };\n}\n\nexport function clearUser() {\n  return (dispatch) => {\n    dispatch({\n      type: CLEAR_USER,\n    });\n  };\n}\n\nexport function setShouldLoadUsers(isUpdated) {\n  return (dispatch) => {\n    dispatch({\n      type: SET_SHOULD_LOAD_USERS,\n      payload: isUpdated,\n    });\n  };\n}\n\nexport function setActiveTab(activeTab) {\n  return (dispatch) => {\n    dispatch({\n      type: SET_ACTIVE_TAB,\n      payload: { activeTab },\n    });\n  };\n}\n\nexport function setGameIndex(gameIndex) {\n  return (dispatch) => {\n    dispatch({\n      type: SET_GAME_INDEX,\n      payload: { gameIndex },\n    });\n  };\n}\n\nexport function setLastIndex(lastIndex) {\n  return (dispatch) => {\n    dispatch({\n      type: SET_LAST_INDEX,\n      payload: { lastIndex },\n    });\n  };\n}\n\nexport function setGame(game) {\n  return (dispatch) => {\n    dispatch({\n      type: SET_GAME,\n      payload: { game },\n    });\n  };\n}\n\nexport function resetWonGame() {\n  return (dispatch) => {\n    dispatch({\n      type: RESET_WON_GAME,\n    });\n  };\n}\n","\nimport React from 'react';\nimport { connect } from \"react-redux\";\nimport UserItem from './components/UserItem';\nimport Tab from './components/Tab';\nimport { getGameWithHighestScore, getUserById } from '../api/fetch';\nimport { setActiveTab, saveUser } from '../actions';\nimport { MOST_WINS_TAB, AVG_SCORE_TAB } from '../constants';\nimport './LeaderBoard.css';\n\nconst LeaderBoard = ({ users, activeTab, setActiveTab, saveUser }) => {\n  const saveUserWithGameDetails =  async (user) => {\n    const { userId, highestScore: { against, score } } = user;\n    const bestGameResponse =  await getGameWithHighestScore(userId, against, score);\n    if (!bestGameResponse) return user;\n    const opponent = await getUserById(against);\n    const bestGame = {\n      opponentName: opponent.name, \n      opponentId: opponent.id, \n      won: bestGameResponse.winnerId === userId, \n      score, \n      date: bestGameResponse.createdAt\n    };\n    saveUser({ ...user, bestGame })\n  }\n\n  const renderLeaderBoard = () => users.map(user => \n    <UserItem \n      key={user.userId} \n      name={user.name}\n      wins={user.wins}\n      averageScore={user.averageScore}\n      losses={user.losses}\n      onClick={() => saveUserWithGameDetails(user)} />\n  )\n\n  const renderErrorMessage = () => <div className='leader-board-error'>Players could not be loaded, please try again later.</div>\n\n  return (\n    <div className='leader-board-wrap'>\n        <div className='leader-board-tabs'>\n          <Tab isActive={activeTab === MOST_WINS_TAB} onClick={() => setActiveTab(MOST_WINS_TAB)} text='Most wins' />\n          <Tab isActive={activeTab === AVG_SCORE_TAB} onClick={() => setActiveTab(AVG_SCORE_TAB)} text='Average score' />\n        </div>\n        <div className='leader-board-users-list'>\n          {users ? renderLeaderBoard() : renderErrorMessage()}\n        </div>\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  const activeTab = state.activeTab;\n  const users = state.activeTab === MOST_WINS_TAB ? state.usersByWins : state.usersByScore;\n  return {\n    activeTab,\n    users,\n  };\n};\n\nconst mapDispatchToProps = {\n  setActiveTab,\n  saveUser,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeaderBoard);\n","\n\nimport React, { useState, useEffect } from 'react';\nimport './TextField.css';\n\nconst TextField = ({ id, isEditing, originalValue, handleChange, customClass }) => {\n  const [ value, setValue ] = useState(originalValue);\n  const [ isValid, setIsValid ] = useState(true);\n\n  useEffect(() => {\n    if (!isEditing) {\n      setValue(originalValue);\n      setIsValid(true);\n    }\n  }, [isEditing, originalValue]);\n\n  const handleInputChange = (event) => {\n    setValue(event.target.value)\n    handleChange(event.target.value, isValid);\n    setIsValid(!!event.target.value);\n  }\n\n  return (\n    isEditing ? (\n      <input \n        type='text'\n        name={id}\n        value={value}\n        onChange={handleInputChange}  \n        className={`text-field ${!isValid ? 'invalid-input' : ''}`}\n      /> \n    ) : <div className={customClass}>{value}</div>\n  )\n}\n\nexport default TextField;\n","import React from 'react';\n\nconst Button = ({ text, onClick, customClass, disabled }) => (\n  <button \n    className={customClass || ''}\n    onClick={onClick}\n    disabled={disabled}\n  >\n    {text}\n  </button>\n)\n\nexport default Button;","\n\nimport React, { useState, useEffect } from 'react';\nimport { connect } from \"react-redux\";\nimport TextField from './TextField';\nimport Button from './Button';\nimport { updateUser } from '../../api/fetch';\nimport { setShouldLoadUsers } from '../../actions';\nimport './UserDetailsSection.css';\n\nconst UserDetailsSection = ({ userId, nameFromState, userNameFromState, emailFromState, setShouldLoadUsers }) => {\n  const [ isEditing, setIsEditing ] = useState(null);\n  const [ name, setName ] = useState(nameFromState);\n  const [ username, setUsername ] = useState(userNameFromState);\n  const [ email, setEmail ] = useState(emailFromState);\n  const [ isFormValid, setIsFormValid ] = useState(true);\n  let checkFormValidity;\n\n  useEffect(() => {\n    setIsFormValid(checkFormValidity());\n  }, [name, username, email, checkFormValidity]);\n\n  const editForm = () => setIsEditing(true);\n  checkFormValidity = () => name && username && email;\n\n  const saveForm = async () => {\n    if (nameFromState !== name || userNameFromState !== username || emailFromState !== email) {\n      const updated = await updateUser(userId, name, username, email);\n      if (updated) {\n        setShouldLoadUsers(true);\n      } else {\n        resetFields();\n      }\n    }\n    setIsEditing(false);\n  }\n\n  const cancelEditing = () => { \n    resetFields();\n    setIsEditing(false);\n  }\n\n  const resetFields = () => {\n    setName(nameFromState);\n    setUsername(userNameFromState);\n    setEmail(emailFromState);\n  }\n\n  const renderFields = () => {\n    return (\n      <div className='text-field-wrap'>\n        <TextField customClass='title-field' id='name' originalValue={name} isEditing={isEditing} handleChange={setName} />\n        <TextField customClass='subtitle-field' id='username' originalValue={username} isEditing={isEditing} handleChange={setUsername} />\n        <TextField customClass='subtitle-field' id='email' originalValue={email} isEditing={isEditing} handleChange={setEmail} />\n      </div>\n    )\n  }\n\n  const renderButtons = () => {\n    if (isEditing) {\n      return (\n        <>\n          <Button text='Save' onClick={saveForm} customClass='popup-form-btn' disabled={!isFormValid}/>\n          <Button text='Cancel' onClick={cancelEditing} customClass='popup-form-btn'/>\n        </>\n      ) \n    }\n    return <Button text='Edit details' onClick={editForm} customClass='popup-edit-btn'/>\n  }\n\n  return (\n    <div className='user-details-section-wrap'>\n      {renderFields()}\n      {renderButtons()}\n    </div>\n  )\n}\n\n\nconst mapStateToProps = (state) => {\n  const { userId, name, username, email } = state.user;\n  return { userId, nameFromState: name, userNameFromState: username, emailFromState: email };\n};\n\nconst mapDispatchToProps = {\n  setShouldLoadUsers\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserDetailsSection);\n","import React from 'react';\nimport './HighestScoreSection.css';\n\nconst HighestScoreSection = ({ name, won, score, opponent, date }) => (\n  <div className='highest-score-wrap'>\n    <div className='highest-score-subtitle'>Highest score</div>\n    <div>\n      <b>{name}</b> {won ? 'won' : 'lost'} with <b>{score} points</b> against <b>{opponent}</b> { date && `on ${date}`}\n    </div>\n  </div>\n)\n\nexport default HighestScoreSection;","import React from 'react';\nimport Button from './Button';\nimport { PREV, NEXT } from '../../constants';\nimport './WonGamesSection.css';\n\nconst WonGamesSection = ({ name, game, fetchGameWonByUser, gameIndex, lastIndex }) => {\n  const { opponentName, playerScore, opponentScore, date } = game;\n\n  const renderWonGameText = () => (\n    <div className='won-games-text'>\n      {name} vs. {opponentName} ({playerScore} : {opponentScore}) {date && `on ${new Date(date).toLocaleString()}`}\n    </div>\n  )\n\n  return (\n    <>\n      <div className='won-games-title'>Won games</div>\n      <div className='won-games-wrap'>\n        <div className={gameIndex > 1 ? '' : 'button-hidden'}>\n          <Button onClick={() => fetchGameWonByUser(PREV)} text='<'/>\n        </div>\n        {game && renderWonGameText()}\n        <div className={gameIndex < lastIndex ? '' : 'button-hidden'}>\n          <Button onClick={() => fetchGameWonByUser(NEXT)} text='>'/>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default WonGamesSection;\n","import React, { useEffect } from 'react';\nimport { connect } from \"react-redux\";\nimport { getGamesWonByUser, getUserById } from \"../api/fetch\";\nimport UserDetailsSection from './components/UserDetailsSection';\nimport UserStats from '../components/UserStats';\nimport HighestScoreSection from './components/HighestScoreSection';\nimport WonGamesSection from './components/WonGamesSection';\nimport Button from './components/Button';\nimport { PREV } from '../constants';\nimport { setGame, setGameIndex, setLastIndex } from '../actions';\nimport './UserPopup.css';\n\nconst UserPopup = ({ hideUserDetail, user, game, gameIndex, lastIndex, setGame, setGameIndex, setLastIndex }) => {\n  const { userId, name, username, email, averageScore, wins, losses, bestGame: { opponentName, date, score, won } } = user;\n  let fetchGameWonByUser;\n\n  useEffect(() => {\n    const fetchWonGame = async () => await fetchGameWonByUser();\n    if (wins) fetchWonGame();\n  }, [fetchGameWonByUser, wins]);\n\n  fetchGameWonByUser = async (direction) => {\n    let nextIndex = gameIndex;\n    if (!direction) setLastIndex(wins < 5 ? wins : 5);\n    if (direction) {\n      nextIndex = direction === PREV ? gameIndex - 1 : gameIndex + 1;\n      setGameIndex(nextIndex)\n    }\n    let response = await getGamesWonByUser(userId, nextIndex);\n    const opponentId = response.game.scores.find(score => score.memberId !== userId).memberId;\n    const opponent = await getUserById(opponentId);\n    const date = response.game.createdAt || '';\n    const playerScore = response.game.scores.find(score => score.memberId === userId)?.score;\n    const opponentScore = response.game.scores.find(score => score.memberId === opponentId)?.score;\n    const newGame = { opponentName: opponent.name || '', date, playerScore, opponentScore }\n    setGame(newGame);\n  };\n\n  return (\n    <div className='user-popup-wrap'>\n      <div className='user-popup-overlay' onClick={hideUserDetail} role='button'/>\n          <div className='user-popup'>\n          <UserDetailsSection name={name} username={username} email={email} />\n          <UserStats wins={wins} averageScore={averageScore} losses={losses} customClass='user-stats'/>\n          <HighestScoreSection name={name} won={won} score={score} opponent={opponentName} date={date ? new Date(date).toLocaleString() : ''}/>\n          {game && ( \n            <WonGamesSection \n              userId={userId}\n              name={name}\n              game={game}\n              fetchGameWonByUser={fetchGameWonByUser}\n              gameIndex={gameIndex}\n              lastIndex={lastIndex}/>\n          )}\n          <Button text='✕' onClick={hideUserDetail} customClass='user-popup-close-btn'/>\n        </div>\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  const user = state.user;\n  const { game, gameIndex, lastIndex } = state.wonGame;\n  return {\n    user, \n    game, \n    gameIndex, \n    lastIndex\n  };\n};\n\nconst mapDispatchToProps = {\n  setGame,\n  setGameIndex,\n  setLastIndex\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserPopup);\n","import React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport LeaderBoard from \"./leaderboard/LeaderBoard\";\nimport UserPopup from \"./user-popup/UserPopup\";\nimport {\n  getLeaderBoardByAvgScore,\n  getLeaderBoardByWins,\n  getUserById,\n} from \"./api/fetch\";\nimport {\n  saveUsersByWins,\n  saveUsersByScore,\n  clearUser,\n  resetWonGame,\n  setShouldLoadUsers,\n} from \"./actions\";\nimport \"./App.css\";\n\nconst App = ({\n  saveUsersByWins,\n  saveUsersByScore,\n  clearUser,\n  resetWonGame,\n  setShouldLoadUsers,\n  detailShown,\n  shouldLoadUsers,\n}) => {\n  let loadUsersByWins;\n  let loadUsersByScore;\n\n  useEffect(() => {\n    const fetchLeaderBoard = async () => {\n      await loadUsersByWins();\n      await loadUsersByScore();\n      setShouldLoadUsers(false);\n    };\n    if (shouldLoadUsers) {\n      fetchLeaderBoard();\n    }\n    // }, [shouldLoadUsers]);\n  }, [shouldLoadUsers, loadUsersByWins, loadUsersByScore, setShouldLoadUsers]);\n\n  loadUsersByWins = async () => {\n    const usersByWins = await getLeaderBoardByWins();\n    if (!usersByWins) {\n      saveUsersByWins(usersByWins);\n      return;\n    }\n    let updatedUsers = [];\n    for (let user of usersByWins) {\n      const updatedUser = await getUserDetails(user);\n      updatedUsers.push(updatedUser);\n    }\n    saveUsersByWins(updatedUsers);\n  };\n\n  loadUsersByScore = async () => {\n    const usersByScore = await getLeaderBoardByAvgScore();\n    if (!usersByScore) {\n      saveUsersByScore(usersByScore);\n      return;\n    }\n    let updatedUsers = [];\n    for (let user of usersByScore) {\n      const updatedUser = await getUserDetails(user);\n      updatedUsers.push(updatedUser);\n    }\n    saveUsersByScore(updatedUsers);\n  };\n\n  const getUserDetails = async (user) => {\n    const userDetails = await getUserById(user.userId);\n    const userWithDetails = { ...user, ...userDetails };\n    return userWithDetails;\n  };\n\n  const hideUserDetail = () => {\n    clearUser();\n    resetWonGame();\n  };\n\n  return (\n    <div className={`app ${detailShown ? \"no-scroll\" : \"\"}`}>\n      <LeaderBoard />\n      {detailShown && <UserPopup hideUserDetail={hideUserDetail} />}\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  const detailShown = !!state.user;\n  const shouldLoadUsers = state.shouldLoadUsers;\n  return {\n    detailShown,\n    shouldLoadUsers,\n  };\n};\n\nconst mapDispatchToProps = {\n  saveUsersByWins,\n  saveUsersByScore,\n  clearUser,\n  resetWonGame,\n  setShouldLoadUsers,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./store\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}